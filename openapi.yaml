openapi: 3.0.3
info:
  title: Lezzetatlasƒ± API
  description: |
    Lezzetatlasƒ± (Taste Atlas) REST API - Restoran deƒüerlendirme ve gurme inceleme platformu
    
    ## √ñzellikler
    - üîê JWT tabanlƒ± kimlik doƒürulama
    - üë• Rol bazlƒ± yetkilendirme (Guest, User, Gourmet, Admin)
    - üè™ Restoran CRUD i≈ülemleri
    - ‚≠ê ƒ∞ki seviyeli deƒüerlendirme sistemi (basit ve gurme)
    - üì∏ Pre-signed URL ile fotoƒüraf y√ºkleme
    - üîç Geli≈ümi≈ü arama, filtreleme ve pagination
    - üìä Rate limiting ve g√ºvenlik
    
    ## Roller
    - **Guest**: Kayƒ±tsƒ±z kullanƒ±cƒ± (sadece okuma)
    - **User**: Kayƒ±tlƒ± kullanƒ±cƒ± (basit yorum/puan)
    - **Gourmet**: √ñzel kod ile kayƒ±tlƒ± gurme (detaylƒ± deƒüerlendirme)
    - **Admin**: Sistem y√∂neticisi (tam yetki)
    
  version: 1.0.0
  contact:
    name: Lezzetatlasƒ± API Support
    email: api@lezzetatlasi.com
  license:
    name: MIT
    url: https://opensource.org/licenses/MIT

servers:
  - url: https://api.lezzetatlasi.com/v1
    description: Production server
  - url: https://staging-api.lezzetatlasi.com/v1
    description: Staging server
  - url: http://localhost:3000/v1
    description: Development server

tags:
  - name: Authentication
    description: Kimlik doƒürulama ve kullanƒ±cƒ± kaydƒ±
  - name: Users
    description: Kullanƒ±cƒ± profil y√∂netimi
  - name: Restaurants
    description: Restoran CRUD i≈ülemleri
  - name: Reviews
    description: Deƒüerlendirme ve yorum sistemi
  - name: Photos
    description: Fotoƒüraf y√ºkleme ve y√∂netimi
  - name: Search
    description: Arama ve ke≈üfet
  - name: Admin
    description: Admin y√∂netim i≈ülemleri

security:
  - BearerAuth: []

paths:
  /auth/register:
    post:
      tags:
        - Authentication
      summary: Normal kullanƒ±cƒ± kaydƒ±
      description: Yeni bir kullanƒ±cƒ± hesabƒ± olu≈üturur
      security: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RegisterRequest'
      responses:
        '201':
          description: Kayƒ±t ba≈üarƒ±lƒ±
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RegisterResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '409':
          $ref: '#/components/responses/Conflict'

  /auth/register/gourmet:
    post:
      tags:
        - Authentication
      summary: Gurme kullanƒ±cƒ± kaydƒ±
      description: √ñzel gurme kodu ile gurme kullanƒ±cƒ± kaydƒ± olu≈üturur
      security: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/GourmetRegisterRequest'
      responses:
        '201':
          description: Gurme kaydƒ± ba≈üarƒ±lƒ±
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GourmetRegisterResponse'
        '400':
          $ref: '#/components/responses/BadRequest'

  /auth/login:
    post:
      tags:
        - Authentication
      summary: Giri≈ü yapma
      description: Email ve ≈üifre ile sisteme giri≈ü yapar
      security: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/LoginRequest'
      responses:
        '200':
          description: Giri≈ü ba≈üarƒ±lƒ±
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LoginResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'

  /auth/refresh:
    post:
      tags:
        - Authentication
      summary: Token yenileme
      description: Refresh token ile yeni access token alƒ±r
      security: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RefreshTokenRequest'
      responses:
        '200':
          description: Token yenilendi
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RefreshTokenResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'

  /auth/logout:
    post:
      tags:
        - Authentication
      summary: √áƒ±kƒ±≈ü yapma
      description: Sistemden √ßƒ±kƒ±≈ü yapar ve token'ƒ± ge√ßersiz kƒ±lar
      responses:
        '200':
          description: √áƒ±kƒ±≈ü ba≈üarƒ±lƒ±
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'

  /users/me:
    get:
      tags:
        - Users
      summary: Kendi profilini g√∂r√ºnt√ºleme
      description: Giri≈ü yapmƒ±≈ü kullanƒ±cƒ±nƒ±n kendi profil bilgilerini getirir
      responses:
        '200':
          description: Profil bilgileri
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserProfileResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'
    
    patch:
      tags:
        - Users
      summary: Profil g√ºncelleme
      description: Kullanƒ±cƒ± profil bilgilerini g√ºnceller
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateProfileRequest'
      responses:
        '200':
          description: Profil g√ºncellendi
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserProfileResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'
    
    delete:
      tags:
        - Users
      summary: Hesap silme
      description: Kullanƒ±cƒ± hesabƒ±nƒ± kalƒ±cƒ± olarak siler
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                password:
                  type: string
                  description: Doƒürulama i√ßin ≈üifre
                reason:
                  type: string
                  description: Hesap silme nedeni
              required:
                - password
      responses:
        '200':
          description: Hesap silindi
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'

  /users/{userId}:
    get:
      tags:
        - Users
      summary: Kullanƒ±cƒ± profili g√∂r√ºnt√ºleme
      description: Belirtilen kullanƒ±cƒ±nƒ±n genel profil bilgilerini getirir
      security: []
      parameters:
        - name: userId
          in: path
          required: true
          schema:
            type: string
          description: Kullanƒ±cƒ± ID'si
      responses:
        '200':
          description: Kullanƒ±cƒ± profili
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PublicUserProfile'
        '404':
          $ref: '#/components/responses/NotFound'

  /restaurants:
    get:
      tags:
        - Restaurants
      summary: Restoran listesi
      description: Filtrelenebilir ve sayfalanabilir restoran listesi
      security: []
      parameters:
        - $ref: '#/components/parameters/PageParam'
        - $ref: '#/components/parameters/LimitParam'
        - $ref: '#/components/parameters/SortParam'
        - $ref: '#/components/parameters/OrderParam'
        - name: city
          in: query
          schema:
            type: string
          description: ≈ûehir filtresi
        - name: cuisine
          in: query
          schema:
            type: string
          description: Mutfak t√ºr√º filtresi
        - name: minRating
          in: query
          schema:
            type: number
            minimum: 0
            maximum: 5
          description: Minimum puan filtresi
        - name: search
          in: query
          schema:
            type: string
          description: Arama terimi
      responses:
        '200':
          description: Restoran listesi
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RestaurantListResponse'
    
    post:
      tags:
        - Restaurants
      summary: Restoran olu≈üturma
      description: Yeni restoran ekler (Sadece Admin)
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateRestaurantRequest'
      responses:
        '201':
          description: Restoran olu≈üturuldu
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RestaurantResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'

  /restaurants/{restaurantId}:
    get:
      tags:
        - Restaurants
      summary: Restoran detayƒ±
      description: Belirtilen restoranƒ±n detaylƒ± bilgilerini getirir
      security: []
      parameters:
        - name: restaurantId
          in: path
          required: true
          schema:
            type: string
          description: Restoran ID'si
      responses:
        '200':
          description: Restoran detayƒ±
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RestaurantDetailResponse'
        '404':
          $ref: '#/components/responses/NotFound'
    
    patch:
      tags:
        - Restaurants
      summary: Restoran g√ºncelleme
      description: Restoran bilgilerini g√ºnceller (Sadece Admin)
      parameters:
        - name: restaurantId
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateRestaurantRequest'
      responses:
        '200':
          description: Restoran g√ºncellendi
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RestaurantResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
    
    delete:
      tags:
        - Restaurants
      summary: Restoran silme
      description: Restoranƒ± siler (Soft delete, Sadece Admin)
      parameters:
        - name: restaurantId
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Restoran silindi
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'

  /restaurants/{restaurantId}/reviews:
    get:
      tags:
        - Reviews
      summary: Yorum listesi
      description: Restoran i√ßin yapƒ±lan t√ºm yorumlarƒ± getirir
      security: []
      parameters:
        - name: restaurantId
          in: path
          required: true
          schema:
            type: string
        - $ref: '#/components/parameters/PageParam'
        - $ref: '#/components/parameters/LimitParam'
        - name: sort
          in: query
          schema:
            type: string
            enum: [recent, highest, lowest]
        - name: type
          in: query
          schema:
            type: string
            enum: [all, user, gourmet]
      responses:
        '200':
          description: Yorum listesi
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ReviewListResponse'
        '404':
          $ref: '#/components/responses/NotFound'
    
    post:
      tags:
        - Reviews
      summary: Basit yorum ekleme
      description: Restoran i√ßin basit yorum ekler (User ve Gourmet)
      parameters:
        - name: restaurantId
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateReviewRequest'
      responses:
        '201':
          description: Yorum eklendi
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ReviewResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '409':
          $ref: '#/components/responses/Conflict'

  /restaurants/{restaurantId}/reviews/gourmet:
    post:
      tags:
        - Reviews
      summary: Gurme deƒüerlendirmesi
      description: Detaylƒ± gurme deƒüerlendirmesi ekler (Sadece Gourmet)
      parameters:
        - name: restaurantId
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateGourmetReviewRequest'
      responses:
        '201':
          description: Gurme deƒüerlendirmesi eklendi
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GourmetReviewResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'

  /reviews/{reviewId}:
    patch:
      tags:
        - Reviews
      summary: Yorum g√ºncelleme
      description: Yorumu g√ºnceller (Sadece yorum sahibi)
      parameters:
        - name: reviewId
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateReviewRequest'
      responses:
        '200':
          description: Yorum g√ºncellendi
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ReviewResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
    
    delete:
      tags:
        - Reviews
      summary: Yorum silme
      description: Yorumu siler (Yorum sahibi veya Admin)
      parameters:
        - name: reviewId
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Yorum silindi
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'

  /reviews/{reviewId}/helpful:
    post:
      tags:
        - Reviews
      summary: Yorumu yararlƒ± bulma
      description: Yorumu yararlƒ± olarak i≈üaretler
      parameters:
        - name: reviewId
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: ƒ∞≈üaretlendi
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: object
                    properties:
                      reviewId:
                        type: string
                      helpfulCount:
                        type: integer
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'

  /photos/upload-url:
    post:
      tags:
        - Photos
      summary: Fotoƒüraf y√ºkleme URL'si isteme
      description: Fotoƒüraf y√ºklemek i√ßin pre-signed URL alƒ±r
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PhotoUploadUrlRequest'
      responses:
        '200':
          description: Upload URL olu≈üturuldu
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PhotoUploadUrlResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'

  /photos/{photoId}/confirm:
    post:
      tags:
        - Photos
      summary: Fotoƒüraf y√ºkleme onayƒ±
      description: S3'e y√ºklenen fotoƒürafƒ± onaylar ve sisteme kaydeder
      parameters:
        - name: photoId
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                caption:
                  type: string
                tags:
                  type: array
                  items:
                    type: string
      responses:
        '200':
          description: Fotoƒüraf kaydedildi
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PhotoResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'

  /restaurants/{restaurantId}/photos:
    get:
      tags:
        - Photos
      summary: Restoran fotoƒüraflarƒ±
      description: Restorana ait fotoƒüraflarƒ± listeler
      security: []
      parameters:
        - name: restaurantId
          in: path
          required: true
          schema:
            type: string
        - $ref: '#/components/parameters/PageParam'
        - $ref: '#/components/parameters/LimitParam'
        - name: sort
          in: query
          schema:
            type: string
            enum: [recent, popular]
      responses:
        '200':
          description: Fotoƒüraf listesi
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PhotoListResponse'
        '404':
          $ref: '#/components/responses/NotFound'

  /photos/{photoId}:
    delete:
      tags:
        - Photos
      summary: Fotoƒüraf silme
      description: Fotoƒürafƒ± siler (Sahibi veya Admin)
      parameters:
        - name: photoId
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Fotoƒüraf silindi
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'

  /search:
    get:
      tags:
        - Search
      summary: Genel arama
      description: Restoranlar, kullanƒ±cƒ±lar ve yorumlarda arama yapar
      security: []
      parameters:
        - name: q
          in: query
          required: true
          schema:
            type: string
          description: Arama terimi
        - name: type
          in: query
          schema:
            type: string
            enum: [restaurant, user, review]
        - $ref: '#/components/parameters/PageParam'
        - $ref: '#/components/parameters/LimitParam'
      responses:
        '200':
          description: Arama sonu√ßlarƒ±
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SearchResponse'

  /restaurants/nearby:
    get:
      tags:
        - Search
      summary: Yakƒ±ndaki restoranlar
      description: Konum bazlƒ± yakƒ±n restoran arama
      security: []
      parameters:
        - name: lat
          in: query
          required: true
          schema:
            type: number
          description: Latitude
        - name: lng
          in: query
          required: true
          schema:
            type: number
          description: Longitude
        - name: radius
          in: query
          schema:
            type: number
            default: 5
          description: Yarƒ±√ßap (km)
        - name: limit
          in: query
          schema:
            type: integer
            default: 10
      responses:
        '200':
          description: Yakƒ±ndaki restoranlar
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/NearbyRestaurantsResponse'

  /admin/users:
    get:
      tags:
        - Admin
      summary: Kullanƒ±cƒ± listesi
      description: T√ºm kullanƒ±cƒ±larƒ± listeler (Sadece Admin)
      parameters:
        - $ref: '#/components/parameters/PageParam'
        - $ref: '#/components/parameters/LimitParam'
        - name: role
          in: query
          schema:
            type: string
            enum: [user, gourmet, admin]
        - name: search
          in: query
          schema:
            type: string
      responses:
        '200':
          description: Kullanƒ±cƒ± listesi
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AdminUserListResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'

  /admin/users/{userId}/role:
    patch:
      tags:
        - Admin
      summary: Kullanƒ±cƒ± rol√º g√ºncelleme
      description: Kullanƒ±cƒ±nƒ±n rol√ºn√º deƒüi≈ütirir (Sadece Admin)
      parameters:
        - name: userId
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                role:
                  type: string
                  enum: [user, gourmet, admin]
                reason:
                  type: string
              required:
                - role
      responses:
        '200':
          description: Rol g√ºncellendi
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'

  /admin/users/{userId}/status:
    patch:
      tags:
        - Admin
      summary: Kullanƒ±cƒ± durumu g√ºncelleme
      description: Kullanƒ±cƒ±yƒ± askƒ±ya alƒ±r veya aktifle≈ütirir (Sadece Admin)
      parameters:
        - name: userId
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                isActive:
                  type: boolean
                reason:
                  type: string
              required:
                - isActive
      responses:
        '200':
          description: Durum g√ºncellendi
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'

  /admin/gourmet-codes:
    post:
      tags:
        - Admin
      summary: Gurme kodu olu≈üturma
      description: Yeni gurme kodlarƒ± olu≈üturur (Sadece Admin)
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                quantity:
                  type: integer
                  minimum: 1
                  maximum: 100
                expiresAt:
                  type: string
                  format: date-time
                note:
                  type: string
              required:
                - quantity
      responses:
        '201':
          description: Kodlar olu≈üturuldu
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GourmetCodesResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'

  /admin/statistics:
    get:
      tags:
        - Admin
      summary: Sistem istatistikleri
      description: Genel sistem istatistiklerini getirir (Sadece Admin)
      responses:
        '200':
          description: ƒ∞statistikler
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/StatisticsResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'

components:
  securitySchemes:
    BearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
      description: JWT token ile kimlik doƒürulama

  parameters:
    PageParam:
      name: page
      in: query
      schema:
        type: integer
        minimum: 1
        default: 1
      description: Sayfa numarasƒ±
    
    LimitParam:
      name: limit
      in: query
      schema:
        type: integer
        minimum: 1
        maximum: 100
        default: 20
      description: Sayfa ba≈üƒ±na sonu√ß sayƒ±sƒ±
    
    SortParam:
      name: sort
      in: query
      schema:
        type: string
      description: Sƒ±ralama alanƒ±
    
    OrderParam:
      name: order
      in: query
      schema:
        type: string
        enum: [asc, desc]
        default: desc
      description: Sƒ±ralama y√∂n√º

  schemas:
    RegisterRequest:
      type: object
      required:
        - email
        - password
        - firstName
        - lastName
      properties:
        email:
          type: string
          format: email
        password:
          type: string
          minLength: 8
        firstName:
          type: string
        lastName:
          type: string
        phone:
          type: string

    RegisterResponse:
      type: object
      properties:
        success:
          type: boolean
        data:
          type: object
          properties:
            userId:
              type: string
            email:
              type: string
            firstName:
              type: string
            lastName:
              type: string
            role:
              type: string
            createdAt:
              type: string
              format: date-time
        message:
          type: string

    GourmetRegisterRequest:
      allOf:
        - $ref: '#/components/schemas/RegisterRequest'
        - type: object
          required:
            - gourmetCode
          properties:
            gourmetCode:
              type: string
            expertise:
              type: array
              items:
                type: string
            certification:
              type: string
            bio:
              type: string

    GourmetRegisterResponse:
      type: object
      properties:
        success:
          type: boolean
        data:
          type: object
          properties:
            userId:
              type: string
            email:
              type: string
            firstName:
              type: string
            lastName:
              type: string
            role:
              type: string
            gourmetProfile:
              type: object
              properties:
                expertise:
                  type: array
                  items:
                    type: string
                certification:
                  type: string
                verifiedAt:
                  type: string
                  format: date-time
            createdAt:
              type: string
              format: date-time
        message:
          type: string

    LoginRequest:
      type: object
      required:
        - email
        - password
      properties:
        email:
          type: string
          format: email
        password:
          type: string

    LoginResponse:
      type: object
      properties:
        success:
          type: boolean
        data:
          type: object
          properties:
            accessToken:
              type: string
            refreshToken:
              type: string
            expiresIn:
              type: integer
            tokenType:
              type: string
            user:
              type: object
              properties:
                userId:
                  type: string
                email:
                  type: string
                role:
                  type: string

    RefreshTokenRequest:
      type: object
      required:
        - refreshToken
      properties:
        refreshToken:
          type: string

    RefreshTokenResponse:
      type: object
      properties:
        success:
          type: boolean
        data:
          type: object
          properties:
            accessToken:
              type: string
            expiresIn:
              type: integer

    UserProfileResponse:
      type: object
      properties:
        success:
          type: boolean
        data:
          type: object
          properties:
            userId:
              type: string
            email:
              type: string
            firstName:
              type: string
            lastName:
              type: string
            phone:
              type: string
            role:
              type: string
            profilePhoto:
              type: string
            stats:
              type: object
              properties:
                reviewCount:
                  type: integer
                photoCount:
                  type: integer
                followersCount:
                  type: integer
                followingCount:
                  type: integer
            createdAt:
              type: string
              format: date-time
            updatedAt:
              type: string
              format: date-time

    PublicUserProfile:
      type: object
      properties:
        success:
          type: boolean
        data:
          type: object
          properties:
            userId:
              type: string
            firstName:
              type: string
            lastName:
              type: string
            role:
              type: string
            profilePhoto:
              type: string
            bio:
              type: string
            stats:
              type: object
            createdAt:
              type: string
              format: date-time

    UpdateProfileRequest:
      type: object
      properties:
        firstName:
          type: string
        lastName:
          type: string
        phone:
          type: string
        bio:
          type: string
        city:
          type: string

    CreateRestaurantRequest:
      type: object
      required:
        - name
        - city
        - address
        - cuisine
      properties:
        name:
          type: string
        description:
          type: string
        cuisine:
          type: array
          items:
            type: string
        city:
          type: string
        district:
          type: string
        address:
          type: string
        coordinates:
          type: object
          properties:
            lat:
              type: number
            lng:
              type: number
        phone:
          type: string
        website:
          type: string
        email:
          type: string
        priceRange:
          type: string
          enum: ['$', '$$', '$$$', '$$$$']
        openingHours:
          type: object
        features:
          type: array
          items:
            type: string

    UpdateRestaurantRequest:
      type: object
      properties:
        description:
          type: string
        phone:
          type: string
        openingHours:
          type: object

    RestaurantResponse:
      type: object
      properties:
        success:
          type: boolean
        data:
          type: object
          properties:
            restaurantId:
              type: string
            name:
              type: string
            slug:
              type: string
            city:
              type: string
            rating:
              type: object
              properties:
                overall:
                  type: number
            createdAt:
              type: string
              format: date-time
        message:
          type: string

    RestaurantListResponse:
      type: object
      properties:
        success:
          type: boolean
        data:
          type: object
          properties:
            restaurants:
              type: array
              items:
                type: object
            pagination:
              $ref: '#/components/schemas/PaginationInfo'

    RestaurantDetailResponse:
      type: object
      properties:
        success:
          type: boolean
        data:
          type: object
          properties:
            restaurantId:
              type: string
            name:
              type: string
            description:
              type: string
            cuisine:
              type: array
              items:
                type: string
            rating:
              type: object
            photos:
              type: array
              items:
                type: object
            recentReviews:
              type: array
              items:
                type: object

    CreateReviewRequest:
      type: object
      required:
        - rating
      properties:
        rating:
          type: number
          minimum: 1
          maximum: 5
        comment:
          type: string
        visitDate:
          type: string
          format: date
        wouldRecommend:
          type: boolean

    CreateGourmetReviewRequest:
      type: object
      required:
        - ratings
      properties:
        ratings:
          type: object
          properties:
            food:
              type: number
            presentation:
              type: number
            service:
              type: number
            ambiance:
              type: number
            value:
              type: number
            overall:
              type: number
        detailedReview:
          type: object
          properties:
            summary:
              type: string
            foodQuality:
              type: string
            presentation:
              type: string
            service:
              type: string
            ambiance:
              type: string
            recommendations:
              type: array
              items:
                type: string
            improvements:
              type: array
              items:
                type: string
        visitDate:
          type: string
          format: date
        occasion:
          type: string
        groupSize:
          type: integer
        wouldRecommend:
          type: boolean

    UpdateReviewRequest:
      type: object
      properties:
        rating:
          type: number
        comment:
          type: string

    ReviewResponse:
      type: object
      properties:
        success:
          type: boolean
        data:
          type: object
          properties:
            reviewId:
              type: string
            restaurantId:
              type: string
            userId:
              type: string
            rating:
              type: number
            comment:
              type: string
            type:
              type: string
            createdAt:
              type: string
              format: date-time
        message:
          type: string

    GourmetReviewResponse:
      type: object
      properties:
        success:
          type: boolean
        data:
          type: object
          properties:
            reviewId:
              type: string
            type:
              type: string
            ratings:
              type: object
            detailedReview:
              type: object
            verifiedGourmet:
              type: boolean
            createdAt:
              type: string
              format: date-time
        message:
          type: string

    ReviewListResponse:
      type: object
      properties:
        success:
          type: boolean
        data:
          type: object
          properties:
            reviews:
              type: array
              items:
                type: object
            pagination:
              $ref: '#/components/schemas/PaginationInfo'
            summary:
              type: object
              properties:
                totalReviews:
                  type: integer
                userReviews:
                  type: integer
                gourmetReviews:
                  type: integer
                averageRating:
                  type: number

    PhotoUploadUrlRequest:
      type: object
      required:
        - restaurantId
        - fileName
        - fileType
        - fileSize
      properties:
        restaurantId:
          type: string
        fileName:
          type: string
        fileType:
          type: string
        fileSize:
          type: integer
        caption:
          type: string

    PhotoUploadUrlResponse:
      type: object
      properties:
        success:
          type: boolean
        data:
          type: object
          properties:
            uploadUrl:
              type: string
            photoId:
              type: string
            expiresIn:
              type: integer
            method:
              type: string
            headers:
              type: object
        message:
          type: string

    PhotoResponse:
      type: object
      properties:
        success:
          type: boolean
        data:
          type: object
          properties:
            photoId:
              type: string
            url:
              type: string
            thumbnail:
              type: string
            caption:
              type: string
            tags:
              type: array
              items:
                type: string
            restaurantId:
              type: string
            uploadedBy:
              type: string
            status:
              type: string
            createdAt:
              type: string
              format: date-time
        message:
          type: string

    PhotoListResponse:
      type: object
      properties:
        success:
          type: boolean
        data:
          type: object
          properties:
            photos:
              type: array
              items:
                type: object
            pagination:
              $ref: '#/components/schemas/PaginationInfo'

    SearchResponse:
      type: object
      properties:
        success:
          type: boolean
        data:
          type: object
          properties:
            results:
              type: array
              items:
                type: object
            pagination:
              $ref: '#/components/schemas/PaginationInfo'

    NearbyRestaurantsResponse:
      type: object
      properties:
        success:
          type: boolean
        data:
          type: object
          properties:
            restaurants:
              type: array
              items:
                type: object
            center:
              type: object
              properties:
                lat:
                  type: number
                lng:
                  type: number
            radius:
              type: number

    AdminUserListResponse:
      type: object
      properties:
        success:
          type: boolean
        data:
          type: object
          properties:
            users:
              type: array
              items:
                type: object
            pagination:
              $ref: '#/components/schemas/PaginationInfo'

    GourmetCodesResponse:
      type: object
      properties:
        success:
          type: boolean
        data:
          type: object
          properties:
            codes:
              type: array
              items:
                type: object
                properties:
                  code:
                    type: string
                  expiresAt:
                    type: string
                    format: date-time
                  isUsed:
                    type: boolean
                  createdAt:
                    type: string
                    format: date-time
            totalGenerated:
              type: integer

    StatisticsResponse:
      type: object
      properties:
        success:
          type: boolean
        data:
          type: object
          properties:
            users:
              type: object
            restaurants:
              type: object
            reviews:
              type: object
            photos:
              type: object

    PaginationInfo:
      type: object
      properties:
        currentPage:
          type: integer
        totalPages:
          type: integer
        totalItems:
          type: integer
        itemsPerPage:
          type: integer
        hasNextPage:
          type: boolean
        hasPreviousPage:
          type: boolean

    SuccessResponse:
      type: object
      properties:
        success:
          type: boolean
        message:
          type: string

    ErrorResponse:
      type: object
      properties:
        success:
          type: boolean
        error:
          type: object
          properties:
            code:
              type: string
            message:
              type: string
            details:
              type: string
            field:
              type: string
            timestamp:
              type: string
              format: date-time
            requestId:
              type: string

  responses:
    BadRequest:
      description: Ge√ßersiz istek
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
    
    Unauthorized:
      description: Kimlik doƒürulama gerekli
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
    
    Forbidden:
      description: Yetki yok
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
    
    NotFound:
      description: Kaynak bulunamadƒ±
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
    
    Conflict:
      description: √áakƒ±≈üma
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
